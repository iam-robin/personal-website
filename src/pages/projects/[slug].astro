---
import { getCollection } from "astro:content";
import ProjectOverlayLayout from "@layouts/ProjectOverlayLayout.astro";

export async function getStaticPaths() {
    const projects = await getCollection("projects");
    return projects.map((project) => ({
        params: { slug: project.slug },
        props: { project },
    }));
}

const { project } = Astro.props;
const { Content } = await project.render();
---

<ProjectOverlayLayout title={project.data.title}>
    <article class="p-8 md:p-12 relative">
        <header class="mb-8">
            <button class="absolute top-0 right-0" onclick="history.back()"
                >Go back</button
            >
            <h1 class="text-3xl md:text-4xl font-bold mb-4">
                {project.data.title}
            </h1>
            <p class="text-lg text-neutral-600">{project.data.description}</p>
            {
                project.data.tags && (
                    <div class="flex flex-wrap gap-2 mt-4">
                        {project.data.tags.map((tag) => (
                            <span class="px-3 py-1 bg-neutral-100 text-neutral-600 text-sm rounded-full">
                                {tag}
                            </span>
                        ))}
                    </div>
                )
            }
            {
                project.data.year && (
                    <p class="text-sm text-neutral-400 mt-4">
                        {project.data.year}
                    </p>
                )
            }
        </header>
        <div class="prose prose-neutral max-w-none">
            <Content />
        </div>
    </article>
</ProjectOverlayLayout>
