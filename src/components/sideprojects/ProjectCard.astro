---
import { Icon } from "astro-icon/components";

interface Props {
    title: string;
    description: string;
    year: string;
    slug: string;
    bgColor?: string;
    bgColorDark?: string;
    thumbnail?: string;
    thumbnailWidth?: string;
    externalUrl?: string;
    tags?: string[];
}

const {
    title,
    description,
    year,
    slug,
    bgColor = "#ef4444",
    bgColorDark,
    thumbnail,
    thumbnailWidth,
    externalUrl,
    tags,
} = Astro.props;

const href = externalUrl || `/projects/${slug}`;
const isExternal = !!externalUrl;
---

<a
    href={href}
    target={isExternal ? "_blank" : undefined}
    rel={isExternal ? "noopener noreferrer" : undefined}
    class="project-card group hover-lift h-full relative aspect-4/5 rounded-2xl p-3 flex flex-col overflow-hidden"
    style={`--bg-color: ${bgColor}; --bg-color-dark: ${bgColorDark || bgColor};`}
>
    <div class="flex justify-between items-center shrink-0">
        <span class="rounded-full bg-neutral-100/10 px-3 py-1 text-white"
            >{year}</span
        >
        <span class="rounded-full bg-neutral-100/10 p-2 text-white">
            {
                isExternal ? (
                    <Icon name="ph:arrow-up-right-bold" class="text-white" />
                ) : (
                    <Icon name="ph:arrows-out-bold" class="text-white" />
                )
            }
        </span>
    </div>
    <div class="thumbnail-container h-full flex-center">
        {
            thumbnail ? (
                <img
                    src={thumbnail}
                    alt={title}
                    class="h-full object-contain"
                    style={
                        thumbnailWidth
                            ? `width: ${thumbnailWidth}`
                            : "width: 30%"
                    }
                />
            ) : (
                <span class="text-neutral-500">â€“</span>
            )
        }
    </div>
    <div class="shrink-0 text-white">
        <h3>{title}</h3>
        {tags && tags.length > 0 && (
            <div class="flex flex-wrap gap-1 mt-2">
                {tags.map((tag) => (
                    <span class="text-xs bg-neutral-100/10 px-2 py-0.5 rounded-full opacity-70">
                        {tag}
                    </span>
                ))}
            </div>
        )}
        <p class="opacity-70 mt-2">{description}</p>
    </div>
</a>

<style>
    .project-card {
        background-color: var(--bg-color);
    }

    :global([data-theme="dark"]) .project-card {
        background-color: var(--bg-color-dark);
    }
</style>
