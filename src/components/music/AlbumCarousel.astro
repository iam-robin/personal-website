---
import Carousel from "@components/carousel/Carousel.astro";
import CarouselItem from "@components/carousel/CarouselItem.astro";
import type { AlbumDetails } from "@api/lastfm";
import AlbumItem from "./AlbumItem.astro";
import type { GardenNoteMatch } from "@utils/gardenNotes";

interface Props {
    title: string;
    albums: AlbumDetails[];
    gardenNoteMap?: Map<string, GardenNoteMatch>;
}

const { title, albums, gardenNoteMap } = Astro.props;

const smallSpan = 10;
const mediumSpan = 5;
const largeSpan = 4;
---

{
    albums.length > 0 && (
        <Carousel headline={title} headlineSize="base">
            {albums.map((album) => (
                <CarouselItem
                    smallSpan={smallSpan}
                    mediumSpan={mediumSpan}
                    largeSpan={largeSpan}
                >
                    <AlbumItem album={album} gardenNoteUrl={gardenNoteMap?.get(album.title) ? `/garden/${gardenNoteMap.get(album.title)!.category}/${gardenNoteMap.get(album.title)!.slug}` : undefined} />
                </CarouselItem>
            ))}
        </Carousel>
    )
}
