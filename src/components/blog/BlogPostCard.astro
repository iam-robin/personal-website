---
import type { CollectionEntry } from 'astro:content';

interface Props {
    post: CollectionEntry<'blog'>;
    currentTag?: string; // Optional current tag for highlighting
}

const { post, currentTag } = Astro.props;

// Format date function
const formatDate = (date: Date) => {
    return date.toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
    });
};
---

<div class="border-gray-200 border-b pb-8">
    <h2 class="mb-2 text-2xl font-semibold">
        <a href={`/blog/${post.slug}`} class="hover:text-blue">
            {post.data.title}
        </a>
    </h2>
    <div class="mb-4 text-neutral-500">
        {formatDate(post.data.date)}
        {
            post.data.tags && post.data.tags.length > 0 && (
                <span class="ml-2">
                    •
                    {post.data.tags.map((tag, i) => (
                        <>
                            <a
                                href={`/blog/tag/${tag}`}
                                class={`${
                                    tag === currentTag ? 'text-blue' : 'text-neutral-500'
                                } hover:text-blue`}
                            >
                                #{tag}
                            </a>
                            {i < post.data.tags.length - 1 && ' '}
                        </>
                    ))}
                </span>
            )
        }
    </div>
    {post.data.description && <p class="text-neutral-700">{post.data.description}</p>}
    <div class="mt-4">
        <a href={`/blog/${post.slug}`} class="text-blue hover:underline"> Read more →</a>
    </div>
</div>
