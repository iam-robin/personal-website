---
import Carousel from "@components/carousel/Carousel.astro";
import CarouselItem from "@components/carousel/CarouselItem.astro";
import BookCarouselItem from "./BookCarouselItem.astro";
import type { Book } from "@api/github-books";

interface Props {
    title: string;
    books: Book[];
    currentlyReadingBooks?: Book[];
}

const { title, books, currentlyReadingBooks = [] } = Astro.props;

const smallSpan = 10;
const mediumSpan = 5;
const largeSpan = 4;

// Combine currently reading books (first) with regular books
const allBooks = [...currentlyReadingBooks, ...books];
---

{
    allBooks.length > 0 && (
        <Carousel headline={title} headlineSize="base">
            {allBooks.map((book, index) => (
                <CarouselItem
                    smallSpan={smallSpan}
                    mediumSpan={mediumSpan}
                    largeSpan={largeSpan}
                >
                    <BookCarouselItem
                        book={book}
                        isCurrentlyReading={
                            index < currentlyReadingBooks.length
                        }
                    />
                </CarouselItem>
            ))}
        </Carousel>
    )
}
