---
import BookItem from "./BookItem.astro";
import type { Book } from "@api/github-books";

interface Props {
    year: string;
    books: Book[];
}

const { year, books = [] } = Astro.props;

// Sort books by finished date (newest first)
const sortedBooks = [...books].sort((a, b) => {
    const dateA = a.finished ? new Date(a.finished).getTime() : 0;
    const dateB = b.finished ? new Date(b.finished).getTime() : 0;
    return dateB - dateA;
});
---

<div class="relative grid grid-cols-12 gap-4">
    <h2
        class="col-start-1 col-end-13 h-fit pb-2 pt-10 font-mono md:sticky md:top-12 md:col-end-3 md:mb-8 md:pb-2"
    >
        {year}
    </h2>
    <div class="col-start-1 col-end-13 md:col-start-4">
        {sortedBooks.map((book) => <BookItem book={book} />)}
    </div>
</div>
